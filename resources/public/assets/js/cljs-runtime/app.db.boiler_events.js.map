{"version":3,"sources":["app/db/boiler_events.cljs"],"mappings":"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","names":["refx.alpha.reg_event_db","p__31629","p__31630","map__31631","cljs.core/--destructure-map","cljs.core.get","vec__31632","cljs.core.nth","kit","db","_","value","cljs.core/assoc-in","cljs.core.keyword","p__31635","p__31636","map__31637","vec__31638","vec__31641","path","cljs.core.into","p__31644","p__31645","map__31646","vec__31647","kit-kw","unit","cljs.core.get_in","converted-value","G__31650","cljs.core._EQ_","p__31651","p__31652","map__31653","vec__31654","G__31657","p__31658","map__31659","map__31660","water-level","pressure","conductivity","temperature","sludge-mass","p__31661","map__31662","default-settings","app.db.defaults/BOILER","cljs.core.merge"],"sourcesContent":["(ns app.db.boiler-events\n  (:require [refx.alpha :refer [reg-event-fx reg-event-db]]\n            [app.db.defaults :as defaults]))\n\n(reg-event-db :change-boiler-water-level\n              (fn [{:keys [kit] :as db} [_ value]]\n                (assoc-in db [(keyword kit) :boiler :water-level] value)))\n\n(reg-event-db :change-boiler-settings\n              (fn [{:keys [kit] :as db} [_ [path value]]]\n                (assoc-in db (into [(keyword kit) :boiler :settings] path) value)))\n\n(reg-event-db :change-boiler-settings-pressure-value\n              (fn [{:keys [kit] :as db} [_ value]]\n                (let [kit-kw (keyword kit)\n                      unit (get-in db [kit-kw :boiler :settings :pressure :unit])\n                      converted-value (cond-> value\n                                              (= unit \"psi\") (-> (* 0.06894744825494)))]\n                  (assoc-in db [kit-kw :boiler :settings :pressure :value] converted-value))))\n\n(reg-event-db :change-boiler-settings-conductivity-value\n              (fn [{:keys [kit] :as db} [_ value]]\n                (let [kit-kw (keyword kit)\n                      unit (get-in db [kit-kw :boiler :settings :conductivity :unit])\n                      converted-value (cond-> value\n                                              (= unit \"ppm\") (-> (* 2)))]\n                  (assoc-in db [kit-kw :boiler :settings :conductivity :value] converted-value))))\n\n(reg-event-db :apply-boiler-settings\n              (fn [{:keys [kit] :as db} _]\n                (let [kit-kw (keyword kit)\n                      {:keys [water-level pressure conductivity temperature sludge-mass]} (get-in db [kit-kw :boiler :settings])]\n\n                  (-> db\n                      (assoc-in [kit-kw :boiler :water-level] (:value water-level))\n                      (assoc-in [kit-kw :boiler :pressure] (:value pressure))\n                      (assoc-in [kit-kw :boiler :prev-pressure] (:value pressure))\n                      (assoc-in [kit-kw :boiler :conductivity] (:value conductivity))\n                      (assoc-in [kit-kw :boiler :temperature] (:value temperature))\n                      (assoc-in [kit-kw :boiler :sludge-mass] (:value sludge-mass))\n                      (assoc-in [kit-kw :boiler :settings :view] false)))))\n\n(reg-event-db :restore-defaults-boiler-settings\n              (fn [{:keys [kit] :as db} _]\n                (let [kit-kw (keyword kit)\n                      default-settings (-> defaults/BOILER\n                                           :settings\n                                           (merge {:view true}))]\n\n                  (assoc-in db [kit-kw :boiler :settings] default-settings))))\n"]}