{"version":3,"sources":["app/db/burner/events.cljs"],"mappings":"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","names":["refx.alpha.reg_event_db","p__46928","p__46929","map__46931","cljs.core/--destructure-map","cljs.core.get","vec__46932","cljs.core.nth","vec__46935","kit","db","_","path","value","cljs.core/assoc-in","cljs.core.into","cljs.core.keyword","p__46942","p__46943","map__46946","vec__46949","vec__46952","v-key","kit-kw","unit","cljs.core.get_in","converted-value","G__46961","cljs.core._EQ_","p__46968","p__46969","map__46970","vec__46971","G__46977","p__46986","p__46987","map__46990","vec__46991","G__47000","p__47006","map__47008","map__47010","mode","status","p__47015","map__47018","default-settings","app.db.defaults/BURNER","cljs.core.merge"],"sourcesContent":["(ns app.db.burner.events\n  (:require [refx.alpha :refer [reg-event-fx reg-event-db]]\n            [app.db.defaults :as defaults]))\n\n(reg-event-db :change-burner-settings\n              (fn [{:keys [kit] :as db} [_ [path value]]]\n                (assoc-in db (into [(keyword kit) :burner :settings] path) value)))\n\n(reg-event-db :change-burner-settings-pressure-value\n              (fn [{:keys [kit] :as db} [_ [v-key value]]]\n                (let [kit-kw (keyword kit)\n                      unit (get-in db [kit-kw :burner :settings :pressure :unit])\n                      converted-value (cond-> value\n                                              (= unit \"psi\") (-> (* 0.06894744825494)))]\n                  (assoc-in db [kit-kw :burner :settings :pressure :value v-key] converted-value))))\n\n(reg-event-db :change-burner-settings-power-max-value\n              (fn [{:keys [kit] :as db} [_ value]]\n                (let [kit-kw (keyword kit)\n                      unit (get-in db [kit-kw :burner :settings :power :max :unit])\n                      converted-value (cond-> value\n                                              (= unit \"MW\") (-> (* 1000)))]\n                  (assoc-in db [kit-kw :burner :settings :power :max :value] converted-value))))\n\n(reg-event-db :change-burner-settings-fuel-consumption-coeff-value\n              (fn [{:keys [kit] :as db} [_ value]]\n                (let [kit-kw (keyword kit)\n                      unit (get-in db [kit-kw :burner :settings :fuel-consumption :coeff :unit])\n                      converted-value (cond-> value\n                                              (= unit \"nm\u00b3/kW*s\") (-> (* 0.00027777777)))]\n                  (assoc-in db [kit-kw :burner :settings :fuel-consumption :coeff :value] converted-value))))\n\n\n(reg-event-db :apply-burner-settings\n              (fn [{:keys [kit] :as db} _]\n                (let [kit-kw (keyword kit)\n                      {:keys [mode status]} (get-in db [kit-kw :burner :settings])]\n\n                  (-> db\n                      (assoc-in [kit-kw :burner :mode] (:value mode))\n                      (assoc-in [kit-kw :burner :status] (:value status))\n                      (assoc-in [kit-kw :burner :settings :view] false)))))\n\n(reg-event-db :restore-defaults-burner-settings\n              (fn [{:keys [kit] :as db} _]\n                (let [kit-kw (keyword kit)\n                      default-settings (-> defaults/BURNER\n                                           :settings\n                                           (merge {:view true}))]\n\n                  (assoc-in db [kit-kw :burner :settings] default-settings))))\n"]}