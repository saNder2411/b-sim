{"version":3,"sources":["app/db/boiler_plant/actuators/feed/electric_valve/events.cljs"],"mappings":";AAIA,sDAAA,tDAACA,wJACa,WAAAC,SAAAC;AAAA,AAAA,IAAAC,aAAAF;IAAAE,iBAAA,AAAAC,4BAAAD;SAAAA,LAAsBO;UAAtB,AAAAL,4CAAAF,eAAA,jEAAaM;IAAbH,aAAAJ;QAAA,AAAAK,4CAAAD,WAAA,IAAA,/DAA2BK;IAA3BH,aAAA,AAAAD,4CAAAD,WAAA,IAAA;WAAA,AAAAC,4CAAAC,WAAA,IAAA,lEAA8BI;YAA9B,AAAAL,4CAAAC,WAAA,IAAA,nEAAmCK;AAAnC,AACE,OAACC,mBAASJ,GAAG,6CAAA,uFAAA,sEAAA,gEAAA,sDAAA,hUAACK,gIAAMN,+QAAoDG,MAAMC;;AAE9F,sDAAA,tDAACb,+LACa,WAAAgB,SAAAC;AAAA,AAAA,IAAAC,aAAAF;IAAAE,iBAAA,AAAAd,4BAAAc;SAAAA,LAAsBR;UAAtB,AAAAL,4CAAAa,eAAA,jEAAaT;IAAbU,aAAAF;QAAA,AAAAV,4CAAAY,WAAA,IAAA,/DAA2BR;YAA3B,AAAAJ,4CAAAY,WAAA,IAAA,nEAA6BN;AAA7B,AACE,IAAMO,OAAK,kDAAA,uFAAA,sEAAA,gEAAA,sDAAA,uEAAA,+DAAA,3cAACC,+CAAOX,sFAAID;IACjBa,kBAAgB,iBAAAC,WAAQV;AAAR,AAAA,GACQ,kDAAA,lDAACW,6CAAEJ;AAAY,QAAAG,WAAA;;AADvBA;;;AADtB,AAGE,6BAAA,uFAAA,sEAAA,gEAAA,sDAAA,uEAAA,+DAAA,/aAACT,mBAASJ,sFAAID,4YAA0Ea;;AAE1G,sDAAA,tDAACtB,uKACa,WAAAyB,SAA0Bd;AAA1B,AAAA,IAAAe,aAAAD;IAAAC,iBAAA,AAAAtB,4BAAAsB;SAAAA,LAAsBhB;UAAtB,AAAAL,4CAAAqB,eAAA,jEAAajB;AAAb,AACE,IAAAkB,aAAgD,kDAAA,uFAAA,sEAAA,gEAAA,sDAAA,uEAAA,5YAACN,+CAAOX,sFAAID;IAA5DkB,iBAAA,AAAAvB,4BAAAuB;aAAA,AAAAtB,4CAAAsB,eAAA,pEAAcC;iBAAd,AAAAvB,4CAAAsB,eAAA,xEAAqBE;oBAArB,AAAAxB,4CAAAsB,eAAA,3EAAgCG;AAAhC,gLACMpB,lDACA,qDAAA,uFAAA,sEAAA,gEAAA,sDAAA,uEAAA,/YAACqB,wIAAWtB,uUAA4DuB,gBAAMJ,jhBAC9E,yhBAAA,uFAAA,sEAAA,gEAAA,sDAAA,uEAAA,n3BAACG,4mBAAWtB,+UAAgEuB,gBAAMH,7/BAClF,ygCAAA,uFAAA,sEAAA,gEAAA,sDAAA,uEAAA,n2CAACE,4lCAAWtB,sVAAmEuB,gBAAMF,59CACrF,2+CAAA,uFAAA,sEAAA,gEAAA,sDAAA,uEAAA,+EAAA,74DAAChB,ujDAAUL;;AAEjC,sDAAA,tDAACT,6LACa,WAAAiC,SAA0BtB;AAA1B,AAAA,IAAAuB,aAAAD;IAAAC,iBAAA,AAAA9B,4BAAA8B;SAAAA,LAAsBxB;UAAtB,AAAAL,4CAAA6B,eAAA,jEAAazB;AAAb,AACE,IAAM0B,iBAAe,gJAAA,2CAAA,uEAAA,lQAACC,uGAAMC;AAA5B,AACE,6BAAA,uFAAA,sEAAA,gEAAA,sDAAA,zSAACvB,mBAASJ,sFAAID,+QAAoD0B","names":["refx.alpha.reg_event_db","p__31256","p__31259","map__31268","cljs.core/--destructure-map","cljs.core.get","vec__31271","cljs.core.nth","vec__31282","kit","db","_","path","value","cljs.core/assoc-in","cljs.core.into","p__31355","p__31356","map__31368","vec__31369","unit","cljs.core.get_in","converted-value","G__31407","cljs.core._EQ_","p__31444","map__31460","map__31464","damper","transition","potentiometer","cljs.core.update_in","cljs.core/merge","p__31485","map__31489","default-values","cljs.core.merge","app.db.defaults/FEEDWATER-VALVE-ELECTRIC"],"sourcesContent":["(ns app.db.boiler-plant.actuators.feed.electric-valve.events\n  (:require [refx.alpha :refer [reg-event-fx reg-event-db]]\n            [app.db.defaults :as defaults]))\n\n(reg-event-db :change-feed-electric-valve\n              (fn [{:keys [kit] :as db} [_ [path value]]]\n                (assoc-in db (into [kit :boiler-plant :actuators :feed :electric-valve] path) value)))\n\n(reg-event-db :change-feed-electric-valve-flow-rate-max-value\n              (fn [{:keys [kit] :as db} [_ value]]\n                (let [unit (get-in db [kit :boiler-plant :actuators :feed :electric-valve :flow-rate :unit])\n                      converted-value (cond-> value\n                                              (= unit \"T/h\") (* 1.016260162601626))]\n                  (assoc-in db [kit :boiler-plant :actuators :feed :electric-valve :flow-rate :max-value] converted-value))))\n\n(reg-event-db :apply-feed-electric-valve-settings\n              (fn [{:keys [kit] :as db} _]\n                (let [{:keys [damper transition potentiometer]} (get-in db [kit :boiler-plant :actuators :feed :electric-valve :init-sim-output])]\n                  (-> db\n                      (update-in [kit :boiler-plant :actuators :feed :electric-valve :damper] merge damper)\n                      (update-in [kit :boiler-plant :actuators :feed :electric-valve :transition] merge transition)\n                      (update-in [kit :boiler-plant :actuators :feed :electric-valve :potentiometer] merge potentiometer)\n                      (assoc-in [kit :boiler-plant :actuators :feed :electric-valve :settings-view] false)))))\n\n(reg-event-db :restore-defaults-feed-electric-valve-settings\n              (fn [{:keys [kit] :as db} _]\n                (let [default-values (merge defaults/FEEDWATER-VALVE-ELECTRIC {:settings-view true})]\n                  (assoc-in db [kit :boiler-plant :actuators :feed :electric-valve] default-values))))\n"]}