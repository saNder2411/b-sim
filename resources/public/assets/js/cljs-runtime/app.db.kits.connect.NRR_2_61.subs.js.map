{"version":3,"sources":["app/db/kits/connect/NRR_2_61/subs.cljs"],"mappings":";AAKA,mBAAA,8DAAA,gDAAA,mFAAA,pNAACA,sRAEQ,WAAAC,SAAqBK;AAArB,AAAA,IAAAJ,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;YAAA,AAAAE,4CAAAF,eAAA,nEAAaG;AAAb,AACE,4DAAA,mFAAA,oEAAA,5MAACE,+CAAOF;;AAEnB,mBAAA,mFAAA,gDAAA,mFAAA,zOAACL,+SAEQ,WAAAQ,SAA2BF;AAA3B,AAAA,IAAAG,aAAAD;IAAAC,iBAAA,AAAAN,4BAAAM;kBAAA,AAAAL,4CAAAK,eAAA,zEAAaC;AAAb,AACE,IAAAC,aAA6BD;IAA7BC,iBAAA,AAAAR,4BAAAQ;aAAA,AAAAP,4CAAAO,eAAA,pEAAcC;YAAd,AAAAR,4CAAAO,eAAA,nEAAqBE;IACfC,iBAAe,AAACC,kCAAqB,AAAA,mFAAOH,QAAQ,AAAA,8FAAaC;IACjEG,sBAAoB,CAAG,AAAA,gFAAA,AAAA,4GAAIC,uCAA0C,CAAGH,iBAAe,AAAA,4GAAA,AAAA,4GAAIG;AAFjG,6CAGMP,nBACA,+BAAA,mFAAA,0DAAA,5KAACQ,6PAAmCJ,vRACpC,uSAAA,mFAAA,8EAAA,jcAACI,wgBAAwCF;;AAE1D,mBAAA,4CAAA,gDAAA,mFAAA,lMAAChB,6RAEQ,WAAKmB,IAAIb;AAAT,AACE,iCAAA,mFAAA,0DAAA,vKAACc,sBAAYD;;AAExB,wDAAA,oFAAA,gDAAA,mFAAA,kFAAA,kGAAA,mFAAA,thBAACE,inBAGQ,WAAAC,SAA0BhB;AAA1B,AAAA,IAAAiB,aAAAD;sBAAA,AAAAE,4CAAAD,WAAA,IAAA,7EAAME;SAAN,AAAAD,4CAAAD,WAAA,IAAA,hEAAsBG;AAAtB,AACE,SAAK,6DAAA,7DAACC,6CAAEF,yCAAoC,gDAAA,hDAACE,6CAAED;;AAE1D,mBAAA,2EAAA,gDAAA,mFAAA,jOAAC1B,uSAEQ,WAAA4B,SAAwBtB;AAAxB,AAAA,IAAAuB,aAAAD;IAAAC,iBAAA,AAAA1B,4BAAA0B;eAAA,AAAAzB,4CAAAyB,eAAA,tEAAaC;AAAb,AACE,IAAMC,WAAS,qDAAA,rDAAC3B,4CAAI0B;IACdE,WAAS,qDAAA,rDAAC5B,4CAAI0B;AADpB,AAEE,GACE,EAAK,AAACG,cAAIF,eAAU,AAACE,cAAID;AAD3B;;AAAA,oBAEE,iBAAAE,oBAAK,AAACD,cAAIF;AAAV,AAAA,GAAAG;AAAoBF;;AAApBE;;;AAFF;;AAAA,oBAGE,iBAAAA,oBAAKH;AAAL,AAAA,oBAAAG;AAAc,OAACD,cAAID;;AAAnBE;;;AAHF;;AAAA,oBAIE,iBAAAA,oBAAKH;AAAL,AAAA,oBAAAG;AAAcF;;AAAdE;;;AAJF;;AAAA,AAAA;;;;;;;AAOb,mBAAA,oEAAA,gDAAA,mFAAA,1NAAClC,6SAEQ,WAAKmC,QAAQ7B;AAAb,AACE,wBAAA,2CAAA,KAAA,IAAA,KAAA,IAAA,KAAA,IAAA,KAAA,/FAAM8B;AAAN,AACE,OAAChC,4CAAIgC,kBAAkBD;;AAEpC,mBAAA,8EAAA,gDAAA,mFAAA,pOAACnC,0SAEQ,WAAAqC,SAAwB/B;AAAxB,AAAA,IAAAgC,aAAAD;IAAAC,iBAAA,AAAAnC,4BAAAmC;eAAA,AAAAlC,4CAAAkC,eAAA,tEAAaR;AAAb,AACE,IAAMS,WAAS,qDAAA,rDAACnC,4CAAI0B;AAApB,AACE,oBAAIS;AAAJ;;AAAA","names":["refx.alpha/reg-sub","p__31600","map__31602","cljs.core/--destructure-map","cljs.core.get","level","_","cljs.core.get_in","p__31605","map__31609","calibration","map__31618","points","cal-p","next-real-high","app.db.utils/calc-real-high-point","next-high-by-boiler","app.db.constants/LEVEL-CALIBRATION","cljs.core/assoc-in","cal","cljs.core/select-keys","refx.alpha.reg_sub","p__31624","vec__31625","cljs.core.nth","current-hotspot","id","cljs.core._EQ_","p__31636","map__31637","switches","switch-1","switch-2","cljs.core/not","and__5043__auto__","node-id","groups-bi-node-id","p__31644","map__31646","switch-3"],"sourcesContent":["(ns app.db.kits.connect.NRR-2-61.subs\n  (:require [refx.alpha :refer [reg-sub]]\n            [app.db.utils :refer [calc-real-high-point]]\n            [app.db.constants :refer [LEVEL-CALIBRATION]]))\n\n(reg-sub :NRR-2-61\n         :<- [:kit/data]\n         (fn [{:keys [level]} _]\n           (get-in level [:controllers \"NRR 2-61\"])))\n\n(reg-sub :NRR-2-61/calibration\n         :<- [:NRR-2-61]\n         (fn [{:keys [calibration]} _]\n           (let [{:keys [points cal-p]} calibration\n                 next-real-high (calc-real-high-point (:high points) (:next-value cal-p))\n                 next-high-by-boiler (+ (-> LEVEL-CALIBRATION :points-by-boiler :min) (* next-real-high (-> LEVEL-CALIBRATION :points-by-boiler :%-in-digital-unit)))]\n             (-> calibration\n                 (assoc-in [:points :next-real-high] next-real-high)\n                 (assoc-in [:points-by-boiler :next-high] next-high-by-boiler)))))\n\n(reg-sub \":connect/NRR 2-61/calibration-boiler-view\"\n         :<- [:NRR-2-61/calibration]\n         (fn [cal _]\n           (select-keys cal [:points :points-by-boiler])))\n\n(reg-sub :NRR-2-61/show-toolbar\n         :<- [:hotspots/current]\n         :<- [:level-controller-id]\n         (fn [[current-hotspot id] _]\n           (and (= current-hotspot \"level-controller\") (= id \"NRR 2-61\"))))\n\n(reg-sub :NRR-2-61/node-id\n         :<- [:NRR-2-61]\n         (fn [{:keys [switches]} _]\n           (let [switch-1 (get switches 1)\n                 switch-2 (get switches 2)]\n             (cond\n               (and (not switch-1) (not switch-2)) 40\n               (and (not switch-1) switch-2) 45\n               (and switch-1 (not switch-2)) 60\n               (and switch-1 switch-2) 65\n               :default 40))))\n\n(reg-sub :NRR-2-61/group\n         :<- [:NRR-2-61/node-id]\n         (fn [node-id _]\n           (let [groups-bi-node-id {40 1 45 2 60 3 65 4}]\n             (get groups-bi-node-id node-id))))\n\n(reg-sub :NRR-2-61/baud-rate\n         :<- [:NRR-2-61]\n         (fn [{:keys [switches]} _]\n           (let [switch-3 (get switches 3)]\n             (if switch-3 250 50))))\n\n"]}