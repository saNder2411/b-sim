{"version":3,"sources":["app/db/events.cljs"],"mappings":"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","names":["p__31170","map__31171","cljs.core/--destructure-map","cljs.core.get","app.db.events/update-screen!","width","height","ratio","screen","cljs.core.assoc","refx.alpha.reg_event_fx","p__31172","vec__31173","cljs.core.nth","_","app.db.db/default-db","refx.alpha.reg_event_db","refx.interceptors.path","p__31176","vec__31177","p__31180","vec__31181","db","new-kit","p__31184","p__31185","map__31186","vec__31187","kit","new-lang","cljs.core/assoc-in","cljs.core.keyword","p__31190","p__31191","map__31192","vec__31193","new-value","p__31196","p__31197","map__31198","vec__31199","p__31202","p__31203","map__31204","vec__31205","p__31208","p__31209","map__31210","vec__31211","p__31214","p__31215","map__31216","vec__31217","js/console.log","p__31220","vec__31221","p__31224","vec__31225","p__31228","p__31229","map__31230","vec__31231","p__31234","p__31235","map__31236","vec__31237","p__31240","p__31241","map__31242","vec__31243","p__31246","p__31247","map__31248","vec__31249","p__31252","p__31253","map__31254","vec__31255","p__31258","p__31259","map__31260","vec__31261","p__31264","p__31265","map__31266","vec__31267"],"sourcesContent":["(ns app.db.events\n  (:require [refx.alpha :refer [reg-event-fx reg-event-db]]\n            [refx.interceptors :refer [path]]\n            [app.db.db :refer [default-db]]))\n\n(defn update-screen! [width height {:keys [ratio] :as screen}]\n  (if (<= (/ width height) ratio)\n    (assoc screen :w width :h (/ width ratio) :scale-f (/ width 1920))\n    (assoc screen :w (* height ratio) :h height :scale-f (/ (* height ratio) 1920))))\n\n(reg-event-fx :initialize-db\n              (fn [_ [_ width height]]\n                {:db (assoc default-db :screen (update-screen! width height (:screen default-db)))}))\n\n\n(reg-event-db :window-resize\n              [(path :screen)]\n              (fn [screen [_ width height]]\n                (update-screen! width height screen)))\n\n(reg-event-db :change-kit\n              (fn [db [_ new-kit]]\n                (assoc db :kit new-kit)))\n\n(reg-event-db :change-lang\n              (fn [{:keys [kit] :as db} [_ new-lang]]\n                (assoc-in db [(keyword kit) :lang] new-lang)))\n\n(reg-event-db :change-operation-mode\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :operation-mode] new-value)))\n\n(reg-event-db :set-ctrl-panel-view\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :ctrl-panel-view] new-value)))\n\n(reg-event-db :set-settings-modal-view\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :settings-modal-view] new-value)))\n\n(reg-event-db :set-highlight-hotspots\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :highlight-hotspots] new-value)))\n\n(reg-event-db :open-general-settings\n              (fn [{:keys [kit] :as db} [_ _]]\n                (js/console.log \"open gen settings\" kit)\n                (-> db\n                    (assoc-in [(keyword kit) :show-general-settings] true)\n                    (assoc-in [(keyword kit) :highlight-hotspots] false))))\n\n(reg-event-db :reset-sim\n              (fn [db [_ _]]\n                (js/console.log \"reset sim - stop sim and prevent to default all sim modules\" \"stopped\")\n                (assoc db :sim \"stopped\")))\n\n(reg-event-db :change-sim\n              (fn [db [_ new-value]]\n                (js/console.log \"change sim\" new-value)\n                (assoc db :sim new-value)))\n\n(reg-event-db :change-current-hotspot\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :current-hotspot] new-value)))\n\n(reg-event-db :change-burner-limiter-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :burner-limiter-full-screen] new-value)))\n\n(reg-event-db :change-pump-limiter-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :pump-limiter-full-screen] new-value)))\n\n(reg-event-db :change-cond-controller-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :cond-controller-full-screen] new-value)))\n\n(reg-event-db :change-level-controller-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :level-controller-full-screen] new-value)))\n\n(reg-event-db :change-level-probe-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :level-probe-full-screen] new-value)))\n\n(reg-event-db :change-converter-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :converter-full-screen] new-value)))\n\n"]}