{"version":3,"sources":["app/db/events.cljs"],"mappings":"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","names":["p__35405","map__35406","cljs.core/--destructure-map","cljs.core.get","app.db.events/update-screen!","width","height","ratio","screen","cljs.core.assoc","refx.alpha.reg_event_fx","p__35407","vec__35408","cljs.core.nth","_","app.db.db/default-db","refx.alpha.reg_event_db","refx.interceptors.path","p__35411","vec__35412","p__35415","vec__35416","db","new-kit","p__35419","p__35420","map__35421","vec__35422","kit","new-lang","cljs.core/assoc-in","cljs.core.keyword","p__35425","p__35426","map__35427","vec__35428","new-value","p__35431","p__35432","map__35433","vec__35434","p__35437","p__35438","map__35439","vec__35440","p__35443","p__35444","map__35445","vec__35446","p__35449","p__35450","map__35451","vec__35452","js/console.log","p__35455","vec__35456","p__35459","vec__35460","p__35463","p__35464","map__35465","vec__35466","kit-kw","p__35469","p__35470","map__35471","vec__35472","p__35475","p__35476","map__35477","vec__35478","p__35481","p__35482","map__35483","vec__35484","p__35487","p__35488","map__35489","vec__35490","p__35493","p__35494","map__35495","vec__35496","p__35499","p__35500","map__35501","vec__35502"],"sourcesContent":["(ns app.db.events\n  (:require [refx.alpha :refer [reg-event-fx reg-event-db]]\n            [refx.interceptors :refer [path]]\n            [app.db.db :refer [default-db]]))\n\n(defn update-screen! [width height {:keys [ratio] :as screen}]\n  (if (<= (/ width height) ratio)\n    (assoc screen :w width :h (/ width ratio) :scale-f (/ width 1920))\n    (assoc screen :w (* height ratio) :h height :scale-f (/ (* height ratio) 1920))))\n\n(reg-event-fx :initialize-db\n              (fn [_ [_ width height]]\n                {:db (assoc default-db :screen (update-screen! width height (:screen default-db)))}))\n\n\n(reg-event-db :window-resize\n              [(path :screen)]\n              (fn [screen [_ width height]]\n                (update-screen! width height screen)))\n\n(reg-event-db :change-kit\n              (fn [db [_ new-kit]]\n                (assoc db :kit new-kit)))\n\n(reg-event-db :change-lang\n              (fn [{:keys [kit] :as db} [_ new-lang]]\n                (assoc-in db [(keyword kit) :lang] new-lang)))\n\n(reg-event-db :change-operation-mode\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :operation-mode] new-value)))\n\n(reg-event-db :set-ctrl-panel-view\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :ctrl-panel-view] new-value)))\n\n(reg-event-db :set-settings-modal-view\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :settings-modal-view] new-value)))\n\n(reg-event-db :set-highlight-hotspots\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :highlight-hotspots] new-value)))\n\n(reg-event-db :open-general-settings\n              (fn [{:keys [kit] :as db} [_ _]]\n                (js/console.log \"open gen settings\" kit)\n                (-> db\n                    (assoc-in [(keyword kit) :show-general-settings] true)\n                    (assoc-in [(keyword kit) :highlight-hotspots] false))))\n\n(reg-event-db :reset-sim\n              (fn [db [_ _]]\n                (js/console.log \"reset sim - stop sim and prevent to default all sim modules\" \"stopped\")\n                (assoc db :sim \"stopped\")))\n\n(reg-event-db :change-sim\n              (fn [db [_ new-value]]\n                (js/console.log \"change sim\" new-value)\n                (assoc db :sim new-value)))\n\n(reg-event-db :change-current-hotspot\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (let [kit-kw (keyword kit)]\n                  (-> db\n                      (assoc-in [kit-kw :highlight-hotspots] false)\n                      (assoc-in [kit-kw :current-hotspot] new-value)))))\n\n(reg-event-db :change-burner-limiter-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :burner-limiter-full-screen] new-value)))\n\n(reg-event-db :change-pump-limiter-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :pump-limiter-full-screen] new-value)))\n\n(reg-event-db :change-cond-controller-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :cond-controller-full-screen] new-value)))\n\n(reg-event-db :change-level-controller-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :level-controller-full-screen] new-value)))\n\n(reg-event-db :change-level-probe-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :level-probe-full-screen] new-value)))\n\n(reg-event-db :change-converter-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :converter-full-screen] new-value)))\n\n"]}