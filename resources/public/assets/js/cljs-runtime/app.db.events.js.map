{"version":3,"sources":["app/db/events.cljs"],"mappings":"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","names":["p__36176","map__36177","cljs.core/--destructure-map","cljs.core.get","app.db.events/update-screen!","width","height","ratio","screen","cljs.core.assoc","refx.alpha.reg_event_fx","p__36178","vec__36179","cljs.core.nth","_","app.db.db/default-db","refx.alpha.reg_event_db","refx.interceptors.path","p__36182","vec__36183","p__36186","vec__36187","db","new-kit","p__36190","p__36191","map__36192","vec__36193","kit","new-value","js/console.log","cljs.core/assoc-in","p__36196","map__36197","p__36198","p__36199","map__36200","vec__36201","vec__36204","path","cljs.core.into","p__36207","map__36208","p__36209","p__36210","map__36211","vec__36212","kit-kw","p__36215","p__36216","map__36217","vec__36218","vec__36221","id","cljs.core.get_in","p__36224","p__36225","map__36226","vec__36227","vec__36230","p__36233","p__36234","map__36235","vec__36236","vec__36239","p__36242","p__36243","map__36244","vec__36245","vec__36248","p__36251","p__36252","map__36253","vec__36254","vec__36257","p__36260","p__36261","map__36262","vec__36263","vec__36266","p__36269","p__36270","map__36271","vec__36272","p__36275","p__36276","map__36277","vec__36278","map__36281","notification","p__36282","p__36283","map__36284","vec__36285","cljs.core.update_in","cljs.core/dissoc"],"sourcesContent":["(ns app.db.events\n  (:require [refx.alpha :refer [reg-event-fx reg-event-db]]\n            [refx.interceptors :refer [path]]\n            [app.db.db :refer [default-db]]))\n\n(defn update-screen! [width height {:keys [ratio] :as screen}]\n  (if (<= (/ width height) ratio)\n    (assoc screen :w width :h (/ width ratio) :scale-f (/ width 1920))\n    (assoc screen :w (* height ratio) :h height :scale-f (/ (* height ratio) 1920))))\n\n(reg-event-fx :initialize-db\n              (fn [_ [_ width height]]\n                {:db (assoc default-db :screen (update-screen! width height (:screen default-db)))}))\n\n(reg-event-db :window-resize\n              [(path :screen)]\n              (fn [screen [_ width height]]\n                (update-screen! width height screen)))\n\n(reg-event-db :change-kit\n              (fn [db [_ new-kit]]\n                (assoc db :kit new-kit)))\n\n(reg-event-db :change-sim\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (js/console.log \"change sim\" new-value)\n                (assoc-in db [kit :sim] new-value)))\n\n(reg-event-db :reset-sim\n              (fn [{:keys [kit] :as db} _]\n                (js/console.log \"reset sim - stop sim and prevent to default all sim modules\" \"stopped\")\n                (assoc-in db [kit :sim] \"stopped\")))\n\n(reg-event-db :change-kit-data-by-path\n              (fn [{:keys [kit] :as db} [_ [path new-value]]]\n                (assoc-in db (into [kit] path) new-value)))\n\n(reg-event-db :open-general-settings\n              (fn [{:keys [kit] :as db} _]\n                (-> db\n                    (assoc-in [kit :general-settings :view] true)\n                    (assoc-in [kit :hotspots :highlight] false))))\n\n(reg-event-db :change-current-hotspot\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (let [kit-kw kit]\n                  (-> db\n                      (assoc-in [kit-kw :hotspots :highlight] false)\n                      (assoc-in [kit-kw :hotspots :current] new-value)))))\n\n(reg-event-db :change-current-low-limiter\n              (fn [{:keys [kit] :as db} [_ [path new-value]]]\n                (let [id (get-in db [kit :system-config :low-limiter :controller-id])]\n                  (assoc-in db (into [kit :low-limiter :controllers id] path) new-value))))\n\n(reg-event-db :change-current-high-limiter\n              (fn [{:keys [kit] :as db} [_ [path new-value]]]\n                (let [id (get-in db [kit :system-config :high-limiter :controller-id])]\n                  (assoc-in db (into [kit :high-limiter :controllers id] path) new-value))))\n\n(reg-event-db :change-current-cond-controller\n              (fn [{:keys [kit] :as db} [_ [path new-value]]]\n                (let [id (get-in db [kit :system-config :cond :controller-id])]\n                  (assoc-in db (into [kit :cond :controllers id] path) new-value))))\n\n(reg-event-db :change-current-level-controller\n              (fn [{:keys [kit] :as db} [_ [path new-value]]]\n                (let [id (get-in db [kit :system-config :level :controller-id])]\n                  (assoc-in db (into [kit :level :controllers id] path) new-value))))\n\n(reg-event-db :change-current-level-probe\n              (fn [{:keys [kit] :as db} [_ [path new-value]]]\n                (let [id (get-in db [kit :system-config :level :probe-ids 0])]\n                  (assoc-in db (into [kit :level :probes 0 id] path) new-value))))\n\n(reg-event-db :change-current-converter\n              (fn [{:keys [kit] :as db} [_ [path new-value]]]\n                (let [id (get-in db [kit :system-config :converter :controller-id])]\n                  (assoc-in db (into [kit :converter :controllers id] path) new-value))))\n\n(reg-event-db :change-modal-info\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [kit :modal-info] new-value)))\n\n(reg-event-db :push-notification\n              (fn [{:keys [kit] :as db} [_ {:keys [id] :as notification}]]\n                (assoc-in db [kit :notifications id] notification)))\n\n(reg-event-db :delete-notification\n              (fn [{:keys [kit] :as db} [_ id]]\n                (update-in db [kit :notifications] dissoc id)))\n\n"]}