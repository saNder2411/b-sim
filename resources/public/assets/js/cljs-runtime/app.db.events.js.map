{"version":3,"sources":["app/db/events.cljs"],"mappings":"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","names":["p__44317","map__44318","cljs.core/--destructure-map","cljs.core.get","app.db.events/update-screen!","width","height","ratio","screen","cljs.core.assoc","refx.alpha.reg_event_fx","p__44326","vec__44329","cljs.core.nth","_","app.db.db/default-db","refx.alpha.reg_event_db","refx.interceptors.path","p__44342","vec__44344","p__44351","vec__44353","db","new-kit","p__44356","p__44357","map__44358","vec__44359","kit","new-lang","cljs.core/assoc-in","cljs.core.keyword","p__44364","p__44365","map__44366","vec__44367","new-value","p__44370","p__44371","map__44372","vec__44373","p__44376","p__44377","map__44378","vec__44379","p__44382","p__44383","map__44384","vec__44385","p__44388","p__44389","map__44390","vec__44391","js/console.log","p__44394","vec__44395","p__44399","vec__44401","p__44411","p__44412","map__44415","vec__44416","kit-kw","p__44431","p__44432","map__44433","vec__44434","limiter-low-level-id","p__44438","p__44439","map__44440","vec__44441","limiter-high-level-id","p__44444","p__44445","map__44446","vec__44447","cond-controller-id","p__44450","p__44451","map__44452","vec__44453","level-controller-id","p__44456","p__44457","map__44458","vec__44459","level-probe-id","p__44462","p__44463","map__44464","vec__44465","converter-id"],"sourcesContent":["(ns app.db.events\n  (:require [refx.alpha :refer [reg-event-fx reg-event-db]]\n            [refx.interceptors :refer [path]]\n            [app.db.db :refer [default-db]]))\n\n(defn update-screen! [width height {:keys [ratio] :as screen}]\n  (if (<= (/ width height) ratio)\n    (assoc screen :w width :h (/ width ratio) :scale-f (/ width 1920))\n    (assoc screen :w (* height ratio) :h height :scale-f (/ (* height ratio) 1920))))\n\n(reg-event-fx :initialize-db\n              (fn [_ [_ width height]]\n                {:db (assoc default-db :screen (update-screen! width height (:screen default-db)))}))\n\n\n(reg-event-db :window-resize\n              [(path :screen)]\n              (fn [screen [_ width height]]\n                (update-screen! width height screen)))\n\n(reg-event-db :change-kit\n              (fn [db [_ new-kit]]\n                (assoc db :kit new-kit)))\n\n(reg-event-db :change-lang\n              (fn [{:keys [kit] :as db} [_ new-lang]]\n                (assoc-in db [(keyword kit) :lang] new-lang)))\n\n(reg-event-db :change-operation-mode\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :operation-mode] new-value)))\n\n(reg-event-db :set-ctrl-panel-view\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :ctrl-panel-view] new-value)))\n\n(reg-event-db :set-settings-modal-view\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :settings-modal-view] new-value)))\n\n(reg-event-db :set-highlight-hotspots\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :highlight-hotspots] new-value)))\n\n(reg-event-db :open-general-settings\n              (fn [{:keys [kit] :as db} [_ _]]\n                (js/console.log \"open gen settings\" kit)\n                (-> db\n                    (assoc-in [(keyword kit) :show-general-settings] true)\n                    (assoc-in [(keyword kit) :highlight-hotspots] false))))\n\n(reg-event-db :reset-sim\n              (fn [db [_ _]]\n                (js/console.log \"reset sim - stop sim and prevent to default all sim modules\" \"stopped\")\n                (assoc db :sim \"stopped\")))\n\n(reg-event-db :change-sim\n              (fn [db [_ new-value]]\n                (js/console.log \"change sim\" new-value)\n                (assoc db :sim new-value)))\n\n(reg-event-db :change-current-hotspot\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (let [kit-kw (keyword kit)]\n                  (-> db\n                      (assoc-in [kit-kw :highlight-hotspots] false)\n                      (assoc-in [kit-kw :current-hotspot] new-value)))))\n\n(reg-event-db :change-limiter-low-level-full-screen\n              (fn [{:keys [kit limiter-low-level-id] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :limiter-low-level :controllers limiter-low-level-id :full-screen] new-value)))\n\n(reg-event-db :change-limiter-high-level-full-screen\n              (fn [{:keys [kit limiter-high-level-id] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :limiter-high-level :controllers limiter-high-level-id :full-screen] new-value)))\n\n\n\n(reg-event-db :change-cond-controller-full-screen\n              (fn [{:keys [kit cond-controller-id] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :cond :controllers cond-controller-id :full-screen] new-value)))\n\n(reg-event-db :change-level-controller-full-screen\n              (fn [{:keys [kit level-controller-id] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :level :controllers level-controller-id :full-screen] new-value)))\n\n(reg-event-db :change-level-probe-full-screen\n              (fn [{:keys [kit level-probe-id] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :level :probes 0 level-probe-id :full-screen] new-value)))\n\n(reg-event-db :change-converter-full-screen\n              (fn [{:keys [kit converter-id] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :converter converter-id :full-screen] new-value)))\n\n"]}