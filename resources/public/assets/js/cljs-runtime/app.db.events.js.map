{"version":3,"sources":["app/db/events.cljs"],"mappings":"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","names":["p__65706","map__65707","cljs.core/--destructure-map","cljs.core.get","app.db.events/update-screen!","width","height","ratio","screen","cljs.core.assoc","refx.alpha.reg_event_fx","p__65708","vec__65709","cljs.core.nth","_","app.db.db/default-db","refx.alpha.reg_event_db","refx.interceptors.path","p__65712","vec__65713","p__65716","vec__65717","db","new-kit","p__65720","vec__65721","new-lang","p__65724","vec__65725","new-value","p__65728","vec__65729","p__65732","vec__65733","p__65736","vec__65737","p__65740","vec__65741","js/console.log","p__65744","vec__65745","p__65748","vec__65749","p__65752","vec__65753"],"sourcesContent":["(ns app.db.events\n  (:require [refx.alpha :refer [reg-event-fx reg-event-db]]\n            [refx.interceptors :refer [path]]\n            [app.db.db :refer [default-db]]))\n\n(defn update-screen! [width height {:keys [ratio] :as screen}]\n  (if (<= (/ width height) ratio)\n    (assoc screen :w width :h (/ width ratio) :scale-f (/ width 1920))\n    (assoc screen :w (* height ratio) :h height :scale-f (/ (* height ratio) 1920))))\n\n(reg-event-fx :initialize-db\n              (fn [_ [_ width height]]\n                {:db (assoc default-db :screen (update-screen! width height (:screen default-db)))}))\n\n\n(reg-event-db :window-resize\n              [(path :screen)]\n              (fn [screen [_ width height]]\n                (update-screen! width height screen)))\n\n(reg-event-db :change-kit\n              (fn [db [_ new-kit]]\n                (assoc db :kit new-kit)))\n\n(reg-event-db :change-lang\n              (fn [db [_ new-lang]]\n                (assoc db :lang new-lang)))\n\n(reg-event-db :change-operation-mode\n              (fn [db [_ new-value]]\n                (assoc db :operation-mode new-value)))\n\n(reg-event-db :set-show-ctrl-panel\n              (fn [db [_ new-value]]\n                (assoc db :show-ctrl-panel new-value)))\n\n(reg-event-db :set-show-general-settings\n              (fn [db [_ new-value]]\n                (assoc db :show-general-settings new-value)))\n\n(reg-event-db :set-highlight-hotspots\n              (fn [db [_ new-value]]\n                (assoc db :highlight-hotspots new-value)))\n\n(reg-event-db :open-general-settings\n              (fn [db [_ _]]\n                (js/console.log \"open gen settings\" db)\n                (assoc db :show-general-settings true :highlight-hotspots false)))\n\n(reg-event-db :reset-sim\n              (fn [db [_ _]]\n                (js/console.log \"reset sim - stop sim and prevent to default all sim modules\" db)\n                (assoc db :sim \"stopped\")))\n\n(reg-event-db :change-sim\n              (fn [db [_ new-value]]\n                (js/console.log \"change sim\" new-value)\n                (assoc db :sim new-value)))\n\n(reg-event-db :change-current-hotspot\n              (fn [db [_ new-value]]\n                (assoc db :current-hotspot new-value)))\n"]}