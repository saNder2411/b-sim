{"version":3,"sources":["app/db/events.cljs"],"mappings":"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","names":["p__36865","map__36866","cljs.core/--destructure-map","cljs.core.get","app.db.events/update-screen!","width","height","ratio","screen","cljs.core.assoc","refx.alpha.reg_event_fx","p__36867","vec__36868","cljs.core.nth","_","app.db.db/default-db","refx.alpha.reg_event_db","refx.interceptors.path","p__36871","vec__36872","p__36875","vec__36876","db","new-kit","p__36879","p__36880","map__36881","vec__36882","kit","new-value","js/console.log","cljs.core/assoc-in","cljs.core.keyword","p__36885","p__36886","map__36887","vec__36888","p__36891","p__36892","map__36893","vec__36894","new-lang","p__36897","p__36898","map__36899","vec__36900","p__36903","p__36904","map__36905","vec__36906","p__36909","p__36910","map__36911","vec__36912","p__36915","p__36916","map__36917","vec__36918","p__36921","p__36922","map__36923","vec__36924","kit-kw","p__36927","p__36928","map__36929","vec__36930","limiter-low-level-id","cljs.core.get_in","p__36933","p__36934","map__36935","vec__36936","limiter-high-level-id","p__36939","p__36940","map__36941","vec__36942","cond-controller-id","p__36945","p__36946","map__36947","vec__36948","level-controller-id","p__36951","p__36952","map__36953","vec__36954","level-probe-id","p__36957","p__36958","map__36959","vec__36960","converter-id","p__36963","p__36964","map__36965","vec__36966","p__36969","p__36970","map__36971","vec__36972","map__36975","id","notification","p__36976","p__36977","map__36978","vec__36979","cljs.core.update_in","cljs.core/dissoc"],"sourcesContent":["(ns app.db.events\n  (:require [refx.alpha :refer [reg-event-fx reg-event-db]]\n            [refx.interceptors :refer [path]]\n            [app.db.db :refer [default-db]]))\n\n(defn update-screen! [width height {:keys [ratio] :as screen}]\n  (if (<= (/ width height) ratio)\n    (assoc screen :w width :h (/ width ratio) :scale-f (/ width 1920))\n    (assoc screen :w (* height ratio) :h height :scale-f (/ (* height ratio) 1920))))\n\n(reg-event-fx :initialize-db\n              (fn [_ [_ width height]]\n                {:db (assoc default-db :screen (update-screen! width height (:screen default-db)))}))\n\n\n(reg-event-db :window-resize\n              [(path :screen)]\n              (fn [screen [_ width height]]\n                (update-screen! width height screen)))\n\n(reg-event-db :change-kit\n              (fn [db [_ new-kit]]\n                (assoc db :kit new-kit)))\n\n(reg-event-db :change-sim\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (js/console.log \"change sim\" new-value)\n                (assoc-in db [(keyword kit) :sim] new-value)))\n\n(reg-event-db :reset-sim\n              (fn [{:keys [kit] :as db} [_ _]]\n                (js/console.log \"reset sim - stop sim and prevent to default all sim modules\" \"stopped\")\n                (assoc-in db [(keyword kit) :sim] \"stopped\")))\n\n(reg-event-db :change-lang\n              (fn [{:keys [kit] :as db} [_ new-lang]]\n                (assoc-in db [(keyword kit) :lang] new-lang)))\n\n(reg-event-db :change-operation-mode\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :operation-mode] new-value)))\n\n(reg-event-db :change-ctrl-panel-view\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :ctrl-panel-view] new-value)))\n\n(reg-event-db :change-settings-modal-view\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :settings-modal-view] new-value)))\n\n\n(reg-event-db :open-general-settings\n              (fn [{:keys [kit] :as db} [_ _]]\n                (js/console.log \"open gen settings\" kit)\n                (-> db\n                    (assoc-in [(keyword kit) :show-general-settings] true)\n                    (assoc-in [(keyword kit) :highlight-hotspots] false))))\n\n(reg-event-db :change-current-hotspot\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (let [kit-kw (keyword kit)]\n                  (-> db\n                      (assoc-in [kit-kw :highlight-hotspots] false)\n                      (assoc-in [kit-kw :current-hotspot] new-value)))))\n\n(reg-event-db :change-limiter-low-level-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (let [kit-kw (keyword kit)\n                      limiter-low-level-id (get-in db [kit-kw :limiter-low-level-id])]\n                  (assoc-in db [kit-kw :limiter-low-level :controllers limiter-low-level-id :full-screen] new-value))))\n\n(reg-event-db :change-limiter-high-level-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (let [kit-kw (keyword kit)\n                      limiter-high-level-id (get-in db [kit-kw :limiter-high-level-id])]\n                  (assoc-in db [kit-kw :limiter-high-level :controllers limiter-high-level-id :full-screen] new-value))))\n\n(reg-event-db :change-cond-controller-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (let [kit-kw (keyword kit)\n                      cond-controller-id (get-in db [kit-kw :cond-controller-id])]\n                  (assoc-in db [kit-kw :cond :controllers cond-controller-id :full-screen] new-value))))\n\n(reg-event-db :change-level-controller-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (let [kit-kw (keyword kit)\n                      level-controller-id (get-in db [kit-kw :level-controller-id])]\n                  (assoc-in db [kit-kw :level :controllers level-controller-id :full-screen] new-value))))\n\n(reg-event-db :change-level-probe-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (let [kit-kw (keyword kit)\n                      level-probe-id (get-in db [kit-kw :level-probe-id])]\n                  (assoc-in db [kit-kw :level :controllers level-probe-id :full-screen] new-value))))\n\n(reg-event-db :change-converter-full-screen\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (let [kit-kw (keyword kit)\n                      converter-id (get-in db [kit-kw :converter-id])]\n                  (assoc-in db [kit-kw :converter :controllers converter-id :full-screen] new-value))))\n\n(reg-event-db :change-modal-info\n              (fn [{:keys [kit] :as db} [_ new-value]]\n                (assoc-in db [(keyword kit) :modal-info] new-value)))\n\n(reg-event-db :push-notification\n              (fn [{:keys [kit] :as db} [_ {:keys [id] :as notification}]]\n                (assoc-in db [(keyword kit) :notifications id] notification)))\n\n(reg-event-db :delete-notification\n              (fn [{:keys [kit] :as db} [_ id]]\n                (update-in db [(keyword kit) :notifications] dissoc id)))\n\n"]}