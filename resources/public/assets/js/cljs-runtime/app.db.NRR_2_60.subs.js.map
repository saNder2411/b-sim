{"version":3,"sources":["app/db/NRR_2_60/subs.cljs"],"mappings":";AAKA,iDAAA,jDAACA,8GACQ,WAAKC,GAAGC;AAAR,AACE,yDAAA,mFAAA,2DAAA,uDAAA,oEAAA,3TAACC,+CAAOF;;AAEnB,mBAAA,qFAAA,gDAAA,mFAAA,3OAACG,gTAEQ,WAAAC,SAA2BH;AAA3B,AAAA,IAAAI,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;kBAAA,AAAAE,4CAAAF,eAAA,zEAAaG;AAAb,AACE,IAAAC,aAA6BD;IAA7BC,iBAAA,AAAAH,4BAAAG;aAAA,AAAAF,4CAAAE,eAAA,pEAAcC;YAAd,AAAAH,4CAAAE,eAAA,nEAAqBE;IACfC,iBAAe,AAACC,kCAAqB,AAAA,mFAAOH,QAAQ,AAAA,8FAAaC;IACjEG,sBAAoB,CAAG,AAAA,gFAAA,AAAA,4GAAIC,uCAA0C,CAAGH,iBAAe,AAAA,4GAAA,AAAA,4GAAIG;AAFjG,6CAGMP,nBACA,+BAAA,mFAAA,0DAAA,5KAACQ,6PAAmCJ,vRACpC,uSAAA,mFAAA,8EAAA,jcAACI,wgBAAwCF;;AAE1D,mBAAA,2CAAA,gDAAA,mFAAA,jMAACX,8RAEQ,WAAKK,YAAYP;AAAjB,AACE,yCAAA,mFAAA,0DAAA,/KAACgB,sBAAYT;;AAExB,wDAAA,wFAAA,gDAAA,mFAAA,kFAAA,kGAAA,mFAAA,1hBAACT,qnBAGQ,WAAAmB,SAA2CjB;AAA3C,AAAA,IAAAkB,aAAAD;sBAAA,AAAAE,4CAAAD,WAAA,IAAA,7EAAME;0BAAN,AAAAD,4CAAAD,WAAA,IAAA,jFAAsBG;AAAtB,AACE,SAAK,6DAAA,7DAACC,6CAAEF,yCAAoC,iEAAA,jEAACE,6CAAED","names":["refx.alpha.reg_sub","db","_","cljs.core.get_in","refx.alpha/reg-sub","p__33149","map__33150","cljs.core/--destructure-map","cljs.core.get","calibration","map__33152","points","cal-p","next-real-high","app.db.utils/calc-real-high-point","next-high-by-boiler","app.db.constants/LEVEL-CALIBRATION","cljs.core/assoc-in","cljs.core/select-keys","p__33154","vec__33156","cljs.core.nth","current-hotspot","level-controller-id","cljs.core._EQ_"],"sourcesContent":["(ns app.db.NRR-2-60.subs\n  (:require [refx.alpha :refer [reg-sub]]\n            [app.db.utils :refer [calc-real-high-point]]\n            [app.db.constants :refer [LEVEL-CALIBRATION]]))\n\n(reg-sub :NRR-2-60\n         (fn [db _]\n           (get-in db [:connect :level :controllers \"NRR 2-60\"])))\n\n(reg-sub :NRR-2-60-calibration\n         :<- [:NRR-2-60]\n         (fn [{:keys [calibration]} _]\n           (let [{:keys [points cal-p]} calibration\n                 next-real-high (calc-real-high-point (:high points) (:next-value cal-p))\n                 next-high-by-boiler (+ (-> LEVEL-CALIBRATION :points-by-boiler :min) (* next-real-high (-> LEVEL-CALIBRATION :points-by-boiler :%-in-digital-unit)))]\n             (-> calibration\n                 (assoc-in [:points :next-real-high] next-real-high)\n                 (assoc-in [:points-by-boiler :next-high] next-high-by-boiler)))))\n\n(reg-sub \"connect-NRR 2-60-calibration-boiler-view\"\n         :<- [:NRR-2-60-calibration]\n         (fn [calibration _]\n           (select-keys calibration [:points :points-by-boiler])))\n\n(reg-sub :NRR-2-60-show-toolbar\n         :<- [:current-hotspot]\n         :<- [:level-controller-id]\n         (fn [[current-hotspot level-controller-id] _]\n           (and (= current-hotspot \"level-controller\") (= level-controller-id \"NRR 2-60\"))))\n\n"]}