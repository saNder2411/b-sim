{"version":3,"sources":["app/db/feedwater_valve/events.cljs"],"mappings":"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","names":["refx.alpha.reg_event_db","p__73148","p__73149","map__73158","cljs.core/--destructure-map","cljs.core.get","vec__73160","cljs.core.nth","vec__73166","kit","db","_","path","value","cljs.core/assoc-in","cljs.core.into","cljs.core.keyword","p__73183","p__73184","map__73191","vec__73193","kit-kw","unit","cljs.core.get_in","converted-value","G__73207","cljs.core._EQ_","p__73217","p__73218","map__73225","vec__73228","G__73245","p__73253","map__73256","map__73262","damper","transition","potentiometer","cljs.core.update_in","cljs.core/merge","p__73271","map__73273","default-values","cljs.core.merge","app.db.defaults/FEEDWATER-VALVE"],"sourcesContent":["(ns app.db.feedwater-valve.events\n  (:require [refx.alpha :refer [reg-event-fx reg-event-db]]\n            [app.db.defaults :as defaults]))\n\n(reg-event-db :change-feedwater-valve\n              (fn [{:keys [kit] :as db} [_ [path value]]]\n                (assoc-in db (into [(keyword kit) :feedwater-valve] path) value)))\n\n(reg-event-db :change-feedwater-valve-flow-rate-max-value\n              (fn [{:keys [kit] :as db} [_ value]]\n                (let [kit-kw (keyword kit)\n                      unit (get-in db [kit-kw :feedwater-valve :flow-rate :unit])\n                      converted-value (cond-> value\n                                              (= unit \"T/h\") (* 1.016260162601626))]\n                  (assoc-in db [kit-kw :feedwater-valve :flow-rate :max-value] converted-value))))\n\n(reg-event-db :change-feedwater-valve-conductivity-value\n              (fn [{:keys [kit] :as db} [_ value]]\n                (let [kit-kw (keyword kit)\n                      unit (get-in db [kit-kw :feedwater-valve :feedwater :conductivity :unit])\n                      converted-value (cond-> value\n                                              (= unit \"ppm\") (* 2))]\n                  (assoc-in db [kit-kw :feedwater-valve :feedwater :conductivity :value] converted-value))))\n\n(reg-event-db :apply-feedwater-valve-settings\n              (fn [{:keys [kit] :as db} _]\n                (let [kit-kw (keyword kit)\n                      {:keys [damper transition potentiometer]} (get-in db [kit-kw :feedwater-valve :init-sim-output])]\n                  (-> db\n                      (update-in [kit-kw :feedwater-valve :damper] merge damper)\n                      (update-in [kit-kw :feedwater-valve :transition] merge transition)\n                      (update-in [kit-kw :feedwater-valve :potentiometer] merge potentiometer)\n                      (assoc-in [kit-kw :feedwater-valve :settings-view] false)))))\n\n(reg-event-db :restore-defaults-feedwater-valve-settings\n              (fn [{:keys [kit] :as db} _]\n                (let [kit-kw (keyword kit)\n                      default-values (merge defaults/FEEDWATER-VALVE {:settings-view true})]\n                  (assoc-in db [kit-kw :feedwater-valve] default-values))))\n"]}