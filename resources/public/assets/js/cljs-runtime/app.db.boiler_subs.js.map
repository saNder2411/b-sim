{"version":3,"sources":["app/db/boiler_subs.cljs"],"mappings":";AAGA,iDAAA,jDAACA,0GACQ,WAAAC,SAA0BM;AAA1B,AAAA,IAAAL,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;SAAAA,LAAsBI;UAAtB,AAAAF,4CAAAF,eAAA,jEAAaG;AAAb,AACE,yDAAA,wIAAA,1LAACG,+CAAOF,sFAAI,AAACG,gDAAQJ;;AAEhC,mBAAA,oFAAA,gDAAA,mFAAA,1OAACK,2SAEQ,WAAKC,OAAOJ;AAAZ,AACE,OAAA,oGAAgBI;;AAE3B,mBAAA,mEAAA,gDAAA,mFAAA,zNAACD,0RAEQ,WAAKC,OAAOJ;AAAZ,AACE,OAAA,iGAAcI;;AAEzB,mBAAA,oEAAA,gDAAA,mFAAA,1NAACD,2RAEQ,WAAKC,OAAOJ;AAAZ,AACE,OAAA,kGAAcI;;AAEzB,mBAAA,4EAAA,gDAAA,mFAAA,lOAACD,8TAEQ,WAAKE,qBAAqBL;AAA1B,AACE,OAAA,0GAAkBK;;AAE7B,wDAAA,uEAAA,gDAAA,mFAAA,4EAAA,kGAAA,mFAAA,ngBAACZ,ulBAGQ,WAAAa,SAAmCN;AAAnC,AAAA,IAAAO,aAAAD;kBAAA,AAAAE,4CAAAD,WAAA,IAAA,zEAAME;sBAAN,AAAAD,4CAAAD,WAAA,IAAA,7EAAkBG;AAAlB,AACE,IAAMC,QAAM,CAAA,QAAO,CAAGF,cAAYC;AAAlC,AACE,GAAI,SAAA,RAAGC;AAAP;;AAAkBA;;;AAE/B,mBAAA,8EAAA,gDAAA,mFAAA,pOAACR,mTAEQ,WAAKS,sBAAcZ;AAAnB,AACE,qBAAA,jBAAMa;AAAN,AACE,QAAG,kBAAA,jBAAGA,0BAAoBD;;AAEvC,mBAAA,4DAAA,gDAAA,mFAAA,lNAACT,mRAEQ,WAAKC,OAAOJ;AAAZ,AACE,OAAA,0FAAWI;;AAEtB,mBAAA,uEAAA,gDAAA,mFAAA,7NAACD,8RAEQ,WAAKC,OAAOJ;AAAZ,AACE,OAAA,qGAAgBI;;AAE3B,mBAAA,qEAAA,gDAAA,mFAAA,3NAACD,4RAEQ,WAAKC,OAAOJ;AAAZ,AACE,OAAA,mGAAeI;;AAE1B,wDAAA,2EAAA,gDAAA,mFAAA,oEAAA,kGAAA,mFAAA,+EAAA,gDAAA,mFAAA,jtBAACX,8xBAIQ,WAAAqB,SAA2Cd;AAA3C,AAAA,IAAAe,aAAAD;eAAA,AAAAN,4CAAAO,WAAA,IAAA,tEAAMC;oBAAN,AAAAR,4CAAAO,WAAA,IAAA,3EAAeE;mBAAf,AAAAT,4CAAAO,WAAA,IAAA,1EAA6BG;AAA7B,AACE,SAAK,8BAAA,7BAAG,CAAGF,WAASC,8BAAuB,gBAAA,fAAGC;;AAEzD,mBAAA,+FAAA,gDAAA,mFAAA,rPAACf,uUAEQ,WAAKgB,gBAAgBnB;AAArB,AACE,oEAAA,7DAACoB,6CAAED","names":["refx.alpha.reg_sub","p__50571","map__50573","cljs.core/--destructure-map","cljs.core.get","kit","db","_","cljs.core.get_in","cljs.core.keyword","refx.alpha/reg-sub","boiler","boiler-init-settings","p__50620","vec__50623","cljs.core.nth","sludge-mass","sludge-mass-max","value","sludge-mass-%","max-svg-height","p__50638","vec__50639","pressure","prev-pressure","conductivity","current-hotspot","cljs.core._EQ_"],"sourcesContent":["(ns app.db.boiler-subs\n  (:require [refx.alpha :refer [reg-sub]]))\n\n(reg-sub :boiler\n         (fn [{:keys [kit] :as db} _]\n           (get-in db [(keyword kit) :boiler])))\n\n(reg-sub :boiler-init-settings\n         :<- [:boiler]\n         (fn [boiler _]\n           (:init-settings boiler)))\n\n(reg-sub :water-level\n         :<- [:boiler]\n         (fn [boiler _]\n           (:water-level boiler)))\n\n(reg-sub :sludge-mass\n         :<- [:boiler]\n         (fn [boiler _]\n           (:sludge-mass boiler)))\n\n(reg-sub :sludge-mass-max\n         :<- [:boiler-init-settings]\n         (fn [boiler-init-settings _]\n           (:sludge-mass-max boiler-init-settings)))\n\n(reg-sub :sludge-mass-%\n         :<- [:sludge-mass]\n         :<- [:sludge-mass-max]\n         (fn [[sludge-mass sludge-mass-max] _]\n           (let [value (* 100 (/ sludge-mass sludge-mass-max))]\n             (if (< value 0) 0 value))))\n\n(reg-sub :sludge-svg-height\n         :<- [:sludge-mass-%]\n         (fn [sludge-mass-% _]\n           (let [max-svg-height 20.587]\n             (* (/ max-svg-height 100) sludge-mass-%))))\n\n(reg-sub :pressure\n         :<- [:boiler]\n         (fn [boiler _]\n           (:pressure boiler)))\n\n(reg-sub :prev-pressure\n         :<- [:boiler]\n         (fn [boiler _]\n           (:prev-pressure boiler)))\n\n(reg-sub :conductivity\n         :<- [:boiler]\n         (fn [boiler _]\n           (:conductivity boiler)))\n\n(reg-sub :show-water-foam\n         :<- [:pressure]\n         :<- [:prev-pressure]\n         :<- [:conductivity]\n         (fn [[pressure prev-pressure conductivity] _]\n           (and (< (- pressure prev-pressure) -0.027) (> conductivity 2500))))\n\n(reg-sub :boiler-show-toolbar-panel\n         :<- [:current-hotspot]\n         (fn [current-hotspot _]\n           (= current-hotspot \"boiler\")))\n"]}