{"version":3,"sources":["app/db/boiler_plant/burner/events.cljs"],"mappings":"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","names":["refx.alpha.reg_event_db","p__31385","p__31386","map__31413","cljs.core/--destructure-map","cljs.core.get","vec__31414","cljs.core.nth","vec__31417","kit","db","_","path","value","cljs.core/assoc-in","cljs.core.into","p__31439","p__31440","map__31445","vec__31446","vec__31449","v-key","unit","cljs.core.get_in","converted-value","G__31467","cljs.core._EQ_","p__31480","p__31481","map__31484","vec__31486","G__31495","p__31501","p__31502","map__31504","vec__31505","G__31515","p__31521","map__31522","map__31523","status","cljs.core.update_in","cljs.core/merge","p__31528","map__31529","default-values","cljs.core.merge","app.db.defaults/BURNER"],"sourcesContent":["(ns app.db.boiler-plant.burner.events\n  (:require [refx.alpha :refer [reg-event-fx reg-event-db]]\n            [app.db.defaults :as defaults]))\n\n(reg-event-db :change-burner\n              (fn [{:keys [kit] :as db} [_ [path value]]]\n                (assoc-in db (into [kit :boiler-plant :burner] path) value)))\n\n(reg-event-db :change-burner-pressure-value\n              (fn [{:keys [kit] :as db} [_ [v-key value]]]\n                (let [unit (get-in db [kit :boiler-plant :burner :pressure :unit])\n                      converted-value (cond-> value\n                                              (= unit \"psi\") (* 0.06894744825494))]\n                  (assoc-in db [kit :boiler-plant :burner :pressure :value v-key] converted-value))))\n\n(reg-event-db :change-burner-power-max-value\n              (fn [{:keys [kit] :as db} [_ value]]\n                (let [unit (get-in db [kit :boiler-plant :burner :power :unit])\n                      converted-value (cond-> value\n                                              (= unit \"MW\") (* 1000))]\n                  (assoc-in db [kit :boiler-plant :burner :power :max-value] converted-value))))\n\n(reg-event-db :change-burner-fuel-consumption-coeff-value\n              (fn [{:keys [kit] :as db} [_ value]]\n                (let [unit (get-in db [kit :boiler-plant :burner :fuel-consumption :coeff :unit])\n                      converted-value (cond-> value\n                                              (= unit \"nm\u00b3/kW*s\") (* 0.00027777777))]\n                  (assoc-in db [kit :boiler-plant :burner :fuel-consumption :coeff :value] converted-value))))\n\n(reg-event-db :apply-burner-settings\n              (fn [{:keys [kit] :as db} _]\n                (let [{:keys [status]} (get-in db [kit :boiler-plant :burner :init-sim-output])]\n\n                  (-> db\n                      (update-in [kit :boiler-plant :burner :status] merge status)\n                      (assoc-in [kit :boiler-plant :burner :settings-view] false)))))\n\n(reg-event-db :restore-defaults-burner-settings\n              (fn [{:keys [kit] :as db} _]\n                (let [default-values (merge defaults/BURNER {:settings-view true})]\n                  (assoc-in db [kit :boiler-plant :burner] default-values))))\n"]}